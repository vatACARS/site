generator client {
  provider   = "prisma-client-js"
  engineType = "binary"
}

datasource db {
  provider = "mongodb"
  url      = env("database_url")
}

model VatACARSUser {
  id            String          @id @default(auto()) @map("_id") @db.ObjectId
  cid           String          @unique
  access_token  String          @unique
  refresh_token String
  vatsim_user   VATSIMUser?
  discord_user  DiscordUser?
  auth_token    AuthToken?
}

model VATSIMUser {
  id              String        @id @default(auto()) @map("_id") @db.ObjectId
  name_first      String
  name_last       String
  rating_id       Int
  rating_short    String
  rating_long     String
  division_id     Int
  division_name   String
  region_id       String
  region_name     String
  sdivision_id    String
  sdivision_name  String
  acars_user_id   String        @unique @db.ObjectId
  VatACARSUser    VatACARSUser  @relation(fields: [acars_user_id], references: [id])
}

model DiscordUser {
  id            String          @id @default(auto()) @map("_id") @db.ObjectId
  discord_id    String          @unique
  access_token  String          @unique
  refresh_token String
  acars_user_id String          @unique @db.ObjectId
  VatACARSUser  VatACARSUser    @relation(fields: [acars_user_id], references: [id])
}

model AuthToken {
  id            String          @id @default(auto()) @map("_id") @db.ObjectId
  token         String          @unique
  created       DateTime
  expires       DateTime
  acars_user_id String          @unique @db.ObjectId
  VatACARSUser  VatACARSUser    @relation(fields: [acars_user_id], references: [id])
}